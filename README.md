# Jogo-de-Adivinhacao-com-AWS-Lambda-API-Gateway-e-S3
Criar e gerenciar uma aplicação serverless na AWS, integrando múltiplos serviços para desenvolver um jogo de adivinhação.


Passo 1 — Criação de uma função do Lambda

Acesse o serviço Lambda no console da AWS e clique em “Criar função”. Selecione “Funções” e, em seguida, clique em “Criar função”. Na tela de “Criar função”, selecione a opção “Criar do zero”. No campo “Nome da função”, digite “LambdaGame-” Em “Tempo de execução”, selecione “Python 3.9”. Em seguinda desça até o final da página, localize e clique em “Criar função”. Salve o arquivo abaixo em Python zipado com nome “lambda_function”, pois será necessário para executar o jogo.

Passo 2 — Script Lamdba

Na seção “Origem do código”, no canto direito, clique em “Fazer upload de”. Será aberta uma opção de seleção. Escolha “Arquivos .zip”, em anexo neste repositório e clique em “Fazer upload”. Procure no seu computador o script “lambda_function” que foi salvo em zip anteriormente. Após selecionar o arquivo, clique em “Salvar”. Abaixo de “Origem do código”, selecione o arquivo “Lambda_function.zip” para que o código seja exibido. Após verificar o código, clique no botão “Deploy” para garantir que as alterações foram realizadas com sucesso.

Passo 3 — Criando API com Amazon API Gateway

Após configurar corretamente a função AWS Lambda, crie uma API no Amazon API Gateway. Essa API permitirá que a função Lambda seja acionada sempre que uma requisição for enviada para um endpoint específico 3.1. No canto superior da tela, use a barra de pesquisa para procurar por Amazon API Gateway e acesse o serviço. No menu à esquerda, clique em “APIs”. Procure por “API HTTP” e, ao lado dessa opção, clique em “Compilar” para começar a configuração da sua API. No campo “Nome da API”, digite “Api-<seu nome e sobrenome>”. Em seguida, na seção “Integrações”, clique no botão “Adicionar integrações” para configurar a conexão com o Lambda. Em “Integrações”, será exibido um campo de seleção. Selecione “Lambda” como o serviço de integração. Após essa escolha, mais opções aparecerão. No campo “Função do Lambda”, selecione a função que você criou anteriormente. Lembre-se de que, ao criar um recurso na AWS, ele recebe um ARN (Amazon Resource Name), que é seu identificador único. Caso sua função Lambda não apareça na lista, você pode estar procurando na região errada. Ao lado do campo “Função do Lambda”, há o campo “Região da AWS”, onde você pode selecionar a região correta em que sua função foi criada. Por fim clique em avançar. Agora vamos configurar a rota da API, que funciona como um endereço onde a API recebe as requisições e as envia para o Lambda.No campo “Método”, escolha “GET”. Isso significa que essa rota será usada para buscar informações do Lambda. No campo “Caminho do recurso”, digite “/jogo”. Isso define o endereço da API que será acessado. Por exemplo, se a AWS gerar o link “https://sua-api.amazonaws.com/jogo", quando alguém acessar esse endereço, a API chamará sua função Lambda automaticamente. Após selecionar as opções corretamente, clique no botão “Avançar” para continuar com a configuração da API. Na próxima etapa, você vai configurar os estágios, que são versões da API. Aqui, vamos trocar o estágio padrão “$default” para “prod”, que representa a versão oficial da API. No nosso caso, vamos manter a implantação automática ativada, para que qualquer mudança feita na API seja aplicada imediatamente, sem a necessidade de um deploy manual. Após essa configuração clique no botão “Avançar” e em seguida “Criar”. No menu esquerdo, clique em “APIs” para visualizar a API que você acabou de criar. Clique na sua API para acessar a mesma. Quando entrar na API, novas opções aparecerão no menu esquerdo. Clique em “API: Api-seu nome e sobrenome” e role a página para baixo. Na seção “Estágios”, procure por “Estágios” e logo abaixo você verá o campo “Invocar URL”. Copie esse link e salve no Bloco de Notas, pois ele será usado para que nosso site se comunique com a API. O último passo é acessar o CORS. Para isso, vá até o menu esquerdo e clique em “CORS”. No canto superior direito, clique no botão “Configurar”. Em “Access-Control-Allow-Origin”, digite “*” e clique em “Adicionar”. Em “Access-Control-Allow-Headers”, digite “content-type” e clique em “Adicionar”. Em “Access-Control-Allow-Methods”, selecione “GET”. Clique no botão “Salvar”.

Passo 4 — Website estático S3

Configurar nosso site utilizando o Amazon S3. Baixe o arquivo “index.html”, que contém a página inicial do nosso site, em anexo.


Procure o arquivo “index.html” no seu computador, clique com o botão direito sobre ele e selecione “Abrir com” > “Bloco de Notas”. Isso permitirá visualizar e editar o código da página inicial do site. No código do arquivo “index.html”, procure por “Invocar URL” e substitua pelo link que você já copiou anteriormente do API Gateway e salvou no Bloco de Notas. Em seguida, localize “Caminho do recurso” e substitua por “jogo”. Isso formará o link completo para que o site consiga chamar corretamente a API.

Procure no código: <footer>  <p>Digite seu nome</p>  </footer>
Substitua no código, dentro de <p> Digite seu nome, apague e coloque seus dados, ex: <p>Patricia Sousa</p>

Acesse o serviço Amazon S3. No menu esquerdo, clique em “Buckets de uso geral” e, em seguida, clique no botão “Criar bucket” para iniciar a configuração. No campo “Nome do bucket”, digite “s3-website-. Lembre-se de que o nome do bucket deve ser único globalmente, ou seja, nenhum outro usuário da AWS pode ter um bucket com o mesmo nome. Se o nome escolhido já estiver em uso, tente variações, como adicionar números ou outras identificações. Role para baixo e clique em “Criar bucket”. Com o bucket criado, clique no nome “ s3-website-<seu nome e sobrenome>”. Faça o upload do arquivo “index.html” para o bucket. No canto superior direito, clique em “Carregar”, depois em “Adicionar arquivos”, selecione o arquivo “index.html”, clique em “Abrir”, role para baixo e clique em “Carregar” e no canto superior em “fechar” após o uploud bem-sucedido. Na última etapa, vamos habilitar o website estático no S3. No menu superior, acesse “Propriedades”. Role até o final da página, encontre a seção “Hospedagem de site estático” e, ao lado, clique no botão “Editar”. Em “Hospedagem de site estático”, selecione “Ativar”.No campo “Documento de índice”, digite “index.html” (o nome deve ser exatamente igual ao arquivo que você fez upload). Por fim desça até o fim da página e clique em “Salvar alterações”. Após ativar a hospedagem de site estático, você será redirecionado para o início do menu “Propriedades”. Role até o final da página, copie o link do campo “Endpoint de site de bucket” e cole em uma nova aba do navegador para acessar o site. Você enfrentará o erro 403 Forbidden ao acessar o site. Isso acontece porque, por padrão, o bucket e seus arquivos são privados. Para corrigir isso, precisamos liberar o acesso público. Na próxima etapa, vamos configurar as permissões corretamente para que o site fique acessível.

Passo 5-Permissão Bucket S3

Para liberar o acesso público ao bucket, no menu superior clique em “Permissões”. Em seguida, localize a seção “Bloquear acesso público (configurações do bucket)” e clique no botão “Editar” ao lado. Ao desmarcar a opção “Bloquear todo o acesso público”, você permite que o bucket seja acessado publicamente, o que é necessário para hospedar um site estático no S3.No entanto, ao manter marcadas as opções “Bloquear acesso público a buckets e objetos concedidos por meio de novas listas de controle de acesso (ACLs)” e “Bloquear acesso público a buckets e objetos concedidos por meio de qualquer lista de controle de acesso (ACLs)”, você impede que permissões de acesso sejam concedidas via ACLs, garantindo que o controle de acesso seja feito exclusivamente por meio de políticas de bucket. Clique em “Salvar alterações” e, quando aparecer a caixa de confirmação, clique em “Confirmar” para aplicar as novas configurações de acesso público ao bucket. Se as opções “Bloquear acesso público a buckets e objetos concedidos por meio de novas políticas de ponto de acesso e bucket público” e “Bloquear acesso público e entre contas a buckets e objetos por meio de qualquer política de bucket ou ponto de acesso público” estiverem marcadas, o bucket não aceitará políticas públicas, o que impediria a configuração da política necessária na próxima etapa. Por isso, precisamos desmarcar essas opções, garantindo que possamos adicionar uma política que permita o acesso público ao index.html. Isso é essencial para que qualquer usuário possa acessar o site hospedado no S3. Ainda no menu “Permissões”, desça até a seção “Política do bucket” e clique em “Editar” para modificar as permissões de acesso ao bucket. Copie o valor do ARN do bucket, pois vamos utilizá-lo na política de acesso. O ARN (Amazon Resource Name) é um identificador único da AWS que especifica recursos dentro do ambiente da AWS. No caso do bucket S3, ele segue o formato: arn:aws:s3:::nome-do-seu-bucket. Esse identificador será usado na política do bucket para definir quem pode acessar o conteúdo e quais permissões serão concedidas. No canto direito, clique em “Gerador de políticas” para criar a política de acesso ao bucket de forma mais fácil e sem necessidade de escrever o código manualmente. Uma nova guia será aberta. Certifique-se de desativar a tradução automática do navegador, pois a página deve estar em inglês. Caso contrário, isso pode impactar a geração correta da política. Em “Select Type of Policy”, selecione “S3 Bucket Policy”. Isso define que a política será aplicada a um bucket do Amazon S3, permitindo configurar permissões específicas para acesso aos arquivos armazenados nele. No campo “Effect”, deixe selecionado “Allow”. Isso significa que a política irá permitir (em vez de negar) as ações que você vai definir, como visualizar ou acessar os arquivos do bucket. É essencial para tornar seu site acessível ao público. No campo “Principal”, digite um asterisco: “*”. Isso significa que você está permitindo o acesso a qualquer pessoa (público geral). É necessário para que qualquer usuário na internet possa acessar seu site estático hospedado no S3. No campo “Actions”, selecione “GetObject”. Essa ação permite que qualquer pessoa acesse e visualize os arquivos do bucket, como o index.html. É essencial para que os visitantes consigam carregar seu site no navegador. No campo “Amazon Resource Name (ARN)”, cole o ARN do seu bucket, que você copiou anteriormente. Depois, adicione “/*” ao final do ARN. Esse /* indica que a permissão será aplicada a todos os arquivos dentro do bucket, e não apenas ao bucket em si. Isso garante que qualquer pessoa possa acessar todos os arquivos públicos, como o index.html. Exemplo: arn:aws:s3:::S3-Website-seunome-sobrenome/* Depois, clique em “Add Statement” para adicionar as configurações definidas, e em seguida clique em “Generate Policy” para gerar automaticamente o código da política com base nas opções que você preencheu.Copie o JSON gerado pelo Gerador de Políticas. Volte para a aba do seu bucket S3, na seção “Política do bucket”, e cole o conteúdo no campo disponível. Isso aplicará a política de acesso público ao seu bucket, permitindo que o site seja acessado via navegador. Antes de clique em “Salvar alterações”, verifique se não há espaços em branco no início ou no final do JSON. O formato JSON é sensível: espaços extras, falta de colchetes {}, ou aspas mal colocadas podem causar erro na hora de aplicar a política. Certifique-se de que o conteúdo está correto e limpo para evitar falhas. Por fim, atualize a página no navegador — seu site estará disponível! Nesse jogo, o usuário digita um número de 1 a 10 e clica no botão “Enviar”.

O site, hospedado no S3, envia a requisição para o API Gateway, que por sua vez aciona a função Lambda. A função Lambda processa o número e retorna a resposta dizendo se o usuário acertou ou não. Tudo isso acontece de forma integrada entre S3, API Gateway e Lambda!

![image](https://github.com/user-attachments/assets/4cb5f014-e9ca-402f-a299-c06a1bf57269)

Primeira tentativa, número 9, o número era menor



![image](https://github.com/user-attachments/assets/089e78cc-0dd3-44fc-acf5-4a45f7e098c2)

Segunda tentativa. Acerto, era número 6.


Reiniciando, a lógica retorna e o número correto para ser escolhido será outro.

Passo 6 — Deleção dos recursos

Para deletar os recursos, acesse o S3, no menu esquerdo clique em “Buckets de uso geral”, selecione o seu bucket e clique no botão “Vazio” que fica no canto superior direito. A AWS só permite apagar um bucket se ele estiver vazio, por isso é necessário remover os arquivos antes. Na caixa de confirmação, digite exatamente: excluir permanentemente. Após isso, o botão “Vazio” ficará disponível para apagar todos os arquivos do bucket. Depois de esvaziar, você poderá excluir o bucket normalmente. O botão “Vazio” apaga todos os dados dentro do bucket de uma vez. Caso você queira apagar arquivos específicos, basta entrar no bucket, selecionar o(s) arquivo(s) desejado(s) e, no canto superior direito, clicar no botão “Excluir”. Assim, você remove apenas os itens selecionados sem apagar o bucket inteiro. Para apagar o bucket, selecione-o na lista, clique em “Excluir” no canto superior direito. Na caixa de confirmação que será exibida, digite exatamente o nome do seu bucket (ex: S3-Website-seu nome e sobrenome) para confirmar a exclusão. Depois disso, clique em “Excluir bucket” para finalizar o processo. Acesse o API Gateway, no menu esquerdo clique em “APIs”, localize e selecione a API com seu nome (por exemplo: “API-seu nome e sobrenome”), e depois clique no botão “Excluir” no canto superior direito. Confirme a exclusão na caixa que será exibida. Isso removerá a API e liberará os recursos associados. Por fim, acesse a página do Lambda. No painel esquerdo, clique em “Funções”, localize e selecione a sua função Lambda. No canto superior direito, clique em “Ações” e, em seguida, em “Excluir”. Confirme a exclusão quando solicitado — isso encerrará completamente o uso dos recursos criados.

Processo concluído com sucesso!

=>Este passo a passo foi desenvolvido no Curso de AWS Developer da Escola da Nuvem

https://www.linkedin.com/school/escola-da-nuvem/



=>Laboratório realizado por Patrícia Sousa

https://www.linkedin.com/feed/update/urn:li:activity:7316965068422758400/

https://medium.com/@patricia--sousa/jogo-de-adivinha%C3%A7%C3%A3o-com-aws-lambda-api-gateway-e-s3-782b4005c56c
